<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Graph-IT | NitrosBase</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/assets/css/0.styles.154cb869.css" as="style"><link rel="preload" href="/assets/js/app.944765d0.js" as="script"><link rel="preload" href="/assets/js/2.22bcbf9a.js" as="script"><link rel="preload" href="/assets/js/12.7338784d.js" as="script"><link rel="prefetch" href="/assets/js/10.11d5cae0.js"><link rel="prefetch" href="/assets/js/11.526e5d55.js"><link rel="prefetch" href="/assets/js/13.70b7fafd.js"><link rel="prefetch" href="/assets/js/14.00e727b9.js"><link rel="prefetch" href="/assets/js/15.e0d484d8.js"><link rel="prefetch" href="/assets/js/16.aca8fdb7.js"><link rel="prefetch" href="/assets/js/17.98851beb.js"><link rel="prefetch" href="/assets/js/18.6991e38c.js"><link rel="prefetch" href="/assets/js/3.df8f0c78.js"><link rel="prefetch" href="/assets/js/4.364390d5.js"><link rel="prefetch" href="/assets/js/5.841ed733.js"><link rel="prefetch" href="/assets/js/6.c6cac2ca.js"><link rel="prefetch" href="/assets/js/7.a44254ac.js"><link rel="prefetch" href="/assets/js/8.ef35da0e.js"><link rel="prefetch" href="/assets/js/9.6fe1409c.js">
    <link rel="stylesheet" href="/assets/css/0.styles.154cb869.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">NitrosBase</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/" class="sidebar-link">NitrosBase 2.0</a></li><li><a href="/ustanovka-i-administrirovanie.html" class="sidebar-link">Установка и администрирование</a></li><li><a href="/demonstracionnaya-baza-dannykh.html" class="sidebar-link">Демонстрационная база данных</a></li><li><a href="/multimodelnost.html" class="sidebar-link">Мультимодельность</a></li><li><a href="/sql.html" class="sidebar-link">SQL</a></li><li><a href="/graph-it.html" class="active sidebar-link">Graph-IT</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/graph-it.html#быстрый-старт" class="sidebar-link">Быстрый старт</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/graph-it.html#примеры-запросов" class="sidebar-link">Примеры запросов</a></li><li class="sidebar-sub-header"><a href="/graph-it.html#пример-приnожения" class="sidebar-link">Пример приложения</a></li></ul></li><li class="sidebar-sub-header"><a href="/graph-it.html#справочник" class="sidebar-link">Справочник</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/graph-it.html#v" class="sidebar-link">v(...)</a></li><li class="sidebar-sub-header"><a href="/graph-it.html#out" class="sidebar-link">out(...)</a></li><li class="sidebar-sub-header"><a href="/graph-it.html#in" class="sidebar-link">in(...)</a></li><li class="sidebar-sub-header"><a href="/graph-it.html#compare" class="sidebar-link">compare(...)</a></li><li class="sidebar-sub-header"><a href="/graph-it.html#get" class="sidebar-link">get(...)</a></li><li class="sidebar-sub-header"><a href="/graph-it.html#as" class="sidebar-link">as(...)</a></li><li class="sidebar-sub-header"><a href="/graph-it.html#gotovar" class="sidebar-link">gotovar</a></li><li class="sidebar-sub-header"><a href="/graph-it.html#select" class="sidebar-link">select</a></li><li class="sidebar-sub-header"><a href="/graph-it.html#orderby" class="sidebar-link">orderby</a></li><li class="sidebar-sub-header"><a href="/graph-it.html#limit" class="sidebar-link">limit</a></li><li class="sidebar-sub-header"><a href="/graph-it.html#offset" class="sidebar-link">offset</a></li><li class="sidebar-sub-header"><a href="/graph-it.html#distinct" class="sidebar-link">distinct</a></li><li class="sidebar-sub-header"><a href="/graph-it.html#outexist" class="sidebar-link">outexist</a></li><li class="sidebar-sub-header"><a href="/graph-it.html#inexist" class="sidebar-link">inexist</a></li><li class="sidebar-sub-header"><a href="/graph-it.html#groupby" class="sidebar-link">groupby</a></li><li class="sidebar-sub-header"><a href="/graph-it.html#join" class="sidebar-link">join</a></li><li class="sidebar-sub-header"><a href="/graph-it.html#ine-и-oute" class="sidebar-link">inE и outE</a></li><li class="sidebar-sub-header"><a href="/graph-it.html#optional-и-endopt" class="sidebar-link">optional и endopt</a></li><li class="sidebar-sub-header"><a href="/graph-it.html#start-union-next-union-и-end-union" class="sidebar-link">start_union, next_union и end_union</a></li></ul></li></ul></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>API</span> <span class="arrow right"></span></p> <!----></div></li><li><a href="/log.html" class="sidebar-link">Версии</a></li></ul> </div> <div class="page"> <div class="content default"><h1 id="graph-it"><a href="#graph-it" aria-hidden="true" class="header-anchor">#</a> Graph-IT</h1> <p>В документе описан поддерживаемый NitrosBase язык запросов <strong>Graph-IT</strong>. Во всех примерах в данном документе используется база данных, описанная в документах «<a href="/multimodelnost.html">Мультимодельность</a>» и «<a href="/demonstracionnaya-baza-dannykh.html">Демонстрационная база данных</a>»</p> <p><strong>Graph-IT</strong> -  реализован в виде С++ API для построения запросов к базе данных. Основу языка составляет класс CQueryConstructor. Методы этого класса позволяют описать и построить план выполнения  запроса.</p> <div class="tip custom-block"><p class="custom-block-title">ЗАМЕЧАНИЕ</p> <p>В следующей версии NitrosBase будет добавлен интерпретатор Graph_IT для представления и передачи запросов в текстовом формате.</p></div> <blockquote><p>В следующей версии NitrosBase будет добавлен интерпретатор Graph_IT для представления и передачи запросов в текстовом формате.</p></blockquote> <p>Graph-IT является как клиентским языком формирования запросов так и внутренним языком для сервера базы данных. Например, обработчик SQL запросов строит план выполнения запроса на языке Graph-IT.</p> <h2 id="быстрый-старт"><a href="#быстрый-старт" aria-hidden="true" class="header-anchor">#</a> <strong>Быстрый старт</strong></h2> <h3 id="примеры-запросов"><a href="#примеры-запросов" aria-hidden="true" class="header-anchor">#</a> Примеры запросов</h3> <p><strong>Простая фильтрация записей</strong></p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>graph
    <span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span>name <span class="token operator">==</span> <span class="token string">&quot;Maria&quot;</span> <span class="token operator">&amp;&amp;</span> town <span class="token operator">==</span> <span class="token string">&quot;London&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">as</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span>
</code></pre></div><p>В приведенной выше последовательности инструкций отбираются записи, соответствующие жителям Лондона с именем «Мария»:</p> <ul><li><strong>graph</strong> — ключевое слово, обозначающее, что последующее являются запросом на языке Graph-it</li> <li><strong>v</strong>(name == &quot;Maria&quot; &amp;&amp; city == &quot;London&quot;) — перебираются все записи, имеющие значением поля name строку &quot;Maria&quot;, а значением city — строку &quot;London&quot;.</li> <li><strong>as(person)</strong> — записи (точнее, id записей), перебираемые вызовом v(), помещаются в переменную person.</li> <li><strong>select(person)</strong> — записи из переменной person помещаются в результаты.</li></ul> <p><strong>Переход по связям</strong></p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>graph
    <span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;person099&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">out</span><span class="token punctuation">(</span><span class="token keyword">friend</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">as</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span>
</code></pre></div><p>В приведенной выше последовательности инструкций отбираются записи, соответствующие друзьям определенного человека:</p> <ul><li><strong>graph</strong> — ключевое слово, обозначающее начало запроса на Graph-it</li> <li><strong>v</strong>(&quot;person099&quot;) — отбирается запись, имеющая значением поля id строку &quot;person099&quot;.</li> <li><strong>out</strong>(friend) — перебираются записи, связанные с последней отобранной записью связью friend (причем для отобранной записи эта связь является исходящей).</li> <li><strong>as</strong>(person) —.записи, перебираемые out(), (точнее, значения их id) помещаются в переменную person.</li> <li><strong>select</strong>(person) — записи из переменной person помещаются в результаты.</li></ul> <p><strong>У кого есть друзья на «Бугатти»?</strong></p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>graph
    <span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span>model <span class="token operator">==</span> <span class="token string">&quot;Bugatti&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">out</span><span class="token punctuation">(</span>owner<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">in</span><span class="token punctuation">(</span><span class="token keyword">friend</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">distinct</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">as</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span>
</code></pre></div><p>В приведенной выше последовательности инструкций отбираются записи, соответствующие людям, имеющим друзей — владельцев автомобилей «Бугатти»:</p> <ul><li><strong>graph</strong> — ключевое слово, обозначающее начало запроса на Graph-it.</li> <li><strong>v</strong>(model == &quot;Bugatti&quot;) — перебор записей со значением &quot;Bugatti&quot; поля model.</li> <li><strong>out</strong>(owner) — перебор записей, связанных с текущей записью из числа перебираемых методом v() исходящей для нее связью owner.</li> <li><strong>in</strong>(friend) — перебор записей, связанных с текущей записью из числа перебираемых методом out(), входящей для нее связью friend.</li> <li><strong>distinct</strong>() — перебираемые методом .in() записи «уникализуются»: при переборе пропускаются записи с уже встречавшимися id. В частности, такие записи не будут помещены в переменную person на следующем шаге.</li> <li><strong>as</strong>(person) — помещение записей, перебираемых на предыдущем шаге, в переменную person.</li> <li><strong>select</strong>(person) — помещение записей из переменной person в результаты.</li></ul> <p><strong>Друзья человека, живущие с ним в одном городе</strong></p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>graph
    <span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;person999&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">as</span><span class="token punctuation">(</span>p1<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>city1<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">out</span><span class="token punctuation">(</span><span class="token keyword">friend</span><span class="token punctuation">,</span> p2<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>city2<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span>city1 <span class="token operator">==</span> city2 <span class="token operator">&amp;&amp;</span> p1 <span class="token operator">!=</span> p2<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span>p2<span class="token punctuation">)</span>
</code></pre></div><p>В приведенной выше последовательности инструкций отбираются записи, соответствующие друзьям определенного человека, живущим в одном с ним городе:</p> <ul><li><strong>graph</strong> — ключевое слово, обозначающее начало запроса на Graph-it.</li> <li><strong>v</strong>(&quot;person999&quot;) — отбор записи с идентификатором &quot;person999&quot; (уникальный идентификатор записи — значение поля id).</li> <li><strong>as</strong>(p1) — помещение записи, отобранной на предыдущем шаге, в переменную p1.</li> <li><strong>get</strong>(city1) — помещение значения поля city записи, отобранной вызовом v(), в переменную city1.</li> <li><strong>out</strong>(friend, p2) — перебираются записи, связанные с текущей записью из числа перебираемых вызовом v() исходящей для нее связью friend; перебираемые записи помещаются в переменную p2.</li> <li><strong>get</strong>(city2) — значения поля city у записей, перебираемых out(), помещаются в переменную city2.</li> <li><strong>compare</strong>(city == city2 &amp;&amp; p1 != p2) — при переборе, производимом out(), пропускаются записи, не удовлетворяющие условию фильтрации (значения переменных соответствуют значениям на текущем шаге перебора в каждом из итераторов).</li> <li><strong>select</strong>(p2) — записи из переменной p2 помещаются в результаты</li></ul> <h3 id="пример-приnожения"><a href="#пример-приnожения" aria-hidden="true" class="header-anchor">#</a> Пример приложения</h3> <p>В комплект поставке входит пример C++ программы (sample2), выполняющей запросы к базе данных с использованием языка <strong>Graph-IT</strong>.</p> <h2 id="справочник"><a href="#справочник" aria-hidden="true" class="header-anchor">#</a> Справочник</h2> <h3 id="v"><a href="#v" aria-hidden="true" class="header-anchor">#</a> v(...)</h3> <p>Метод v() производит отбор записей — узлов графа данных.</p> <div class="tip custom-block"><p class="custom-block-title">ВАЖНО</p> <p>Любая последовательность вызовов начинается с вызова этого метода</p></div> <p>Реализованы три различные формы метода v().</p> <h4 id="_1-есnи-аргументы-не-указаны-отбираются-все-записи-графа"><a href="#_1-есnи-аргументы-не-указаны-отбираются-все-записи-графа" aria-hidden="true" class="header-anchor">#</a> 1. Если аргументы не указаны, отбираются все записи графа</h4> <div class="language-cpp extra-class"><pre class="language-cpp"><code>graph<span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">as</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span>
</code></pre></div><blockquote><p>В примере выше произведен подсчет общего числа записей в графе.</p></blockquote> <h4 id="_2-есnи-указано-строковое-значение-оно-трактуется-как-требуемое-значение-поnя-id"><a href="#_2-есnи-указано-строковое-значение-оно-трактуется-как-требуемое-значение-поnя-id" aria-hidden="true" class="header-anchor">#</a> 2. Если указано строковое значение, оно трактуется как требуемое значение поля id</h4> <div class="language-cpp extra-class"><pre class="language-cpp"><code>graph<span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;person099&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">as</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span>
</code></pre></div><blockquote><p>В примере выше отобрана запись со значением id, равным &quot;person099&quot;..</p></blockquote> <h4 id="_3-есnи-указано-усnовие-фиnьтрации-отбираются-записи-удовnетворяющие-усnовию"><a href="#_3-есnи-указано-усnовие-фиnьтрации-отбираются-записи-удовnетворяющие-усnовию" aria-hidden="true" class="header-anchor">#</a> 3. Если указано условие фильтрации, отбираются записи, удовлетворяющие условию</h4> <div class="language-cpp extra-class"><pre class="language-cpp"><code>graph<span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">&quot;Maria&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">as</span><span class="token punctuation">(</span>maria<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span>maria<span class="token punctuation">)</span>
</code></pre></div><blockquote><p>В примере выше отобраны записи со значением name, равным &quot;Maria&quot;.</p></blockquote> <div class="tip custom-block"><p class="custom-block-title">ВАЖНО</p> <p>Условия фильтрации, задаваемый внутри функции v используют индексы. Если Вы хотите задать простую проверку записей по некоторым условиям, то воспользуйтесь нижеописанной функцией compare</p></div> <h3 id="out"><a href="#out" aria-hidden="true" class="header-anchor">#</a> out(...)</h3> <p>Перебирает записи, с которыми текущая запись из числа последних перебираемых имеет исходящую связь. Название связи может быть указано в скобках.</p> <p>Записи, перебираемые out(), становятся «последними перебираемыми»: последовательно становятся «текущими» для последующих операций.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>graph<span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;person099&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">out</span><span class="token punctuation">(</span><span class="token keyword">friend</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">as</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span>
</code></pre></div><blockquote><p>В примере выше перебираются и помещаются в переменную f записи, связанные с записью с идентификатором &quot;person099&quot; связью &quot;friend&quot;, причем для связи с идентификатором &quot;person099&quot; эта связь является исходящей.</p> <hr> <p>В данном примере мы встаем на запись с идентификатором &quot;person099&quot;. Далее переходим по ссылке friend на другую запись (ее идентификатор сохраняется в переменной f).</p></blockquote> <p>Метод может быть вызван сразу с двумя аргументами, вторым аргументом является переменная, в которую помещаются отобранные записи. Пример ниже эквивалентен предыдущему.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>graph<span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;person099&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">out</span><span class="token punctuation">(</span><span class="token keyword">friend</span><span class="token punctuation">,</span> f<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span>
</code></pre></div><h3 id="in"><a href="#in" aria-hidden="true" class="header-anchor">#</a> in(...)</h3> <p>Перебирает записи, с которыми текущая запись из числа последних перебираемых имеет входящую для неё связь. Название связи может быть указано в скобках.</p> <blockquote><p>Записи, перебираемые in(), становятся «последними перебираемыми»: последовательно становятся «текущими» для последующих операций.</p></blockquote> <div class="language-cpp extra-class"><pre class="language-cpp"><code>graph<span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;person099&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">in</span><span class="token punctuation">(</span><span class="token keyword">friend</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">as</span><span class="token punctuation">(</span>g<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span>g<span class="token punctuation">)</span>
</code></pre></div><blockquote><p>В примере выше перебираются и помещаются в переменную g записи, связанные с записью с идентификатором &quot;person099&quot; связью &quot;friend&quot;, причем для связи с идентификатором &quot;person099&quot; эта связь является входящей.</p> <hr> <p>В данном примере мы встаем на запись с идентификатором &quot;person099&quot;. Далее переходим по входящей ссылке friend на другую запись (ее идентификатор сохраняется в переменной g).</p></blockquote> <p>Метод может быть вызван сразу с двумя аргументами, вторым аргументом является переменная, в которую помещаются отобранные записи. Пример ниже эквивалентен предыдущему.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>graph<span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;person099&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">in</span><span class="token punctuation">(</span><span class="token keyword">friend</span><span class="token punctuation">,</span> g<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span>g<span class="token punctuation">)</span>
</code></pre></div><h3 id="compare"><a href="#compare" aria-hidden="true" class="header-anchor">#</a> compare(...)</h3> <p>Метод приостанавливает обход графа для тех сочетаний значений переменных, для которых не выполняется условие фильтрации, указываемое в качестве аргумента.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>graph
    <span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;person099&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">as</span><span class="token punctuation">(</span>p1<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">in</span><span class="token punctuation">(</span>owner<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">out</span><span class="token punctuation">(</span>owner<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">as</span><span class="token punctuation">(</span>p2<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span>p1 <span class="token operator">!=</span> p2<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span>p2<span class="token punctuation">)</span>
</code></pre></div><p>В примере выше перебираются записи, которые соответствуют «совладельцам» всех автомобилей определенного владельца.</p> <h3 id="get"><a href="#get" aria-hidden="true" class="header-anchor">#</a> get(...)</h3> <p>У последних перебираемых записей значения полей, указанных в качестве аргументов, помещаются в одноименные переменные.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>graph
    <span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;person099&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> lastname<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> lastname<span class="token punctuation">)</span>
</code></pre></div><p>В примере выше значения полей name и  lastname записи с идентификатором &quot;person099&quot; помещены в переменные name и  lastname соответственно.</p> <p>Для того чтобы отобрать значения полей в переменные с другими названиями, следует использовать as():</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>graph
    <span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;person099&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> lastname<span class="token punctuation">.</span><span class="token function">as</span><span class="token punctuation">(</span>surname<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> surname<span class="token punctuation">)</span>
</code></pre></div><h3 id="as"><a href="#as" aria-hidden="true" class="header-anchor">#</a> as(...)</h3> <p>Помещает значения полей у последних перебираемых записей в переменные, названия которых передаются в качестве аргументы.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>graph
    <span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;person099&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">as</span><span class="token punctuation">(</span>firstname<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>lastname<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">as</span><span class="token punctuation">(</span>surname<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> surname<span class="token punctuation">)</span>
</code></pre></div><p>При большом числе значений полей можно использовать другую форму записи:</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>graph
    <span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;person099&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>name<span class="token punctuation">.</span><span class="token function">as</span><span class="token punctuation">(</span>firstname<span class="token punctuation">)</span><span class="token punctuation">,</span> lastname<span class="token punctuation">.</span><span class="token function">as</span><span class="token punctuation">(</span>surname<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> surname<span class="token punctuation">)</span>
</code></pre></div><p>Кроме того, позволяет запоминать сами записи для последующего обращения к ним с помощью gotovar():</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>graph
    <span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;person099&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">as</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">out</span><span class="token punctuation">(</span><span class="token keyword">friend</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">as</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">gotovar</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>name<span class="token punctuation">.</span><span class="token function">as</span><span class="token punctuation">(</span>name1<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">gotovar</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>name<span class="token punctuation">.</span><span class="token function">as</span><span class="token punctuation">(</span>name2<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span>name1<span class="token punctuation">,</span> name2<span class="token punctuation">)</span>
</code></pre></div><h3 id="gotovar"><a href="#gotovar" aria-hidden="true" class="header-anchor">#</a> gotovar</h3> <p>Производится возврат к записям, помещаемым в переменные на предыдущих шагах с помощью as(), эти записи становятся «последними перебираемыми».</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>graph
    <span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;person099&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">as</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">out</span><span class="token punctuation">(</span><span class="token keyword">friend</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">as</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">gotovar</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>name<span class="token punctuation">.</span><span class="token function">as</span><span class="token punctuation">(</span>name1<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">gotovar</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>name<span class="token punctuation">.</span><span class="token function">as</span><span class="token punctuation">(</span>name2<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span>name1<span class="token punctuation">,</span> name2<span class="token punctuation">)</span>
</code></pre></div><h3 id="select"><a href="#select" aria-hidden="true" class="header-anchor">#</a> select</h3> <p>Переменные, указанные в качестве аргументов, помещаются в результаты запроса. Предварительно переменные должны быть отобраны с помощью as(), в противном случае будет предпринята попытка поместить в переменные значения одноименных полей у последних перебираемых записей.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>graph
    <span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;person099&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> lastname<span class="token punctuation">.</span><span class="token function">as</span><span class="token punctuation">(</span>surname<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> surname<span class="token punctuation">)</span>
</code></pre></div><h3 id="orderby"><a href="#orderby" aria-hidden="true" class="header-anchor">#</a> orderby</h3> <p>Метод вызывается после вызова select(), упорядочивает выдачу по значениям переменных, передаваемых в качестве аргументов. По умолчанию упорядочивает по возрастанию, способ упорядочения может быть задан явно с помощью asc() и desc().</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>graph
    <span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span>type<span class="token operator">=</span><span class="token string">&quot;person&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> age<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> age<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">orderby</span><span class="token punctuation">(</span>name<span class="token punctuation">.</span><span class="token function">asc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> age<span class="token punctuation">.</span><span class="token function">desc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>В примере выше перечень всех людей упорядочен по алфавиту (по возрастанию), при совпадении фамилий вначале идут обладатели большего age.</p> <h3 id="limit"><a href="#limit" aria-hidden="true" class="header-anchor">#</a> limit</h3> <p>Метод вызывается после вызова orderby(), ограничивает выдачу количеством результатов, указанным в качестве аргумента.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>graph
    <span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span>type<span class="token operator">=</span><span class="token string">&quot;person&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> age<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> age<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">orderby</span><span class="token punctuation">(</span>name<span class="token punctuation">.</span><span class="token function">asc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> age<span class="token punctuation">.</span><span class="token function">desc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="offset"><a href="#offset" aria-hidden="true" class="header-anchor">#</a> offset</h3> <p>Метод вызывается после вызова limit(), в выдаче опущено передаваемое в качестве аргумента количество результатов, идущих первыми в соответствии с упорядочением, заданным orderby().</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>graph
    <span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span>type<span class="token operator">=</span><span class="token string">&quot;person&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> age<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> age<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">orderby</span><span class="token punctuation">(</span>name<span class="token punctuation">.</span><span class="token function">asc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> age<span class="token punctuation">.</span><span class="token function">desc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">offset</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="distinct"><a href="#distinct" aria-hidden="true" class="header-anchor">#</a> distinct</h3> <p>Вызов метода «уникализует» последние отобранные записи или значения полей.<br>
В примере ниже метод используется для сокращения перебора:</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>graph
    <span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;person009&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">out</span><span class="token punctuation">(</span><span class="token keyword">friend</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">out</span><span class="token punctuation">(</span><span class="token keyword">friend</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">distinct</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">in</span><span class="token punctuation">(</span>owner<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">distinct</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>model<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span>model<span class="token punctuation">)</span>
</code></pre></div><p>Метод может вызываться и после select(), в этом случае ему могут быть переданы аргументы: переменные, комбинации значений которых должны быть уникальными. Значения переменных, уникальность которых не требуется, будут отобраны случайным с точки зрения пользователя образом.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>graph
    <span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span>city<span class="token operator">=</span><span class="token string">&quot;London&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> lastname<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> lastname<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">distinct</span><span class="token punctuation">(</span>lastname<span class="token punctuation">)</span>
</code></pre></div><h3 id="outexist"><a href="#outexist" aria-hidden="true" class="header-anchor">#</a> outexist</h3> <p>Метод приостанавливает обход графа для тех записей из числа последних перебираемых, у которых отсутствует исходящая связь с определенной записью.</p> <p>Связь указывается первым аргументом, идентификатор записи — вторым.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>graph
    <span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span>type<span class="token operator">=</span><span class="token string">&quot;car&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">outexist</span><span class="token punctuation">(</span>owner<span class="token punctuation">,</span> <span class="token string">&quot;person099&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>number<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span>number<span class="token punctuation">)</span>
</code></pre></div><p>В примере выше будут выведены номера всех автомобилей определенного владельца.</p> <h3 id="inexist"><a href="#inexist" aria-hidden="true" class="header-anchor">#</a> inexist</h3> <p>Метод приостанавливает обход графа для тех записей из числа последних перебираемых, у которых отсутствует входящая связь с определенной записью.</p> <p>Связь указывается первым аргументом, идентификатор записи — вторым.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>graph<span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span>type<span class="token operator">=</span><span class="token string">&quot;person&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">inexist</span><span class="token punctuation">(</span>owner<span class="token punctuation">,</span> <span class="token string">&quot;car001&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
</code></pre></div><p>В примере выше будут выведены имена всех владельцев определенного автомобиля.</p> <h3 id="groupby"><a href="#groupby" aria-hidden="true" class="header-anchor">#</a> groupby</h3> <p>Метод вызывается после select() и позволяет сгруппировать результаты с вычислением агрегирующих функций. При этом сами агрегирующие функции указываются внутри select() как показано в примере ниже.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>graph
    <span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span>type<span class="token operator">=</span><span class="token string">&quot;person&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>city<span class="token punctuation">,</span> age<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span>city<span class="token punctuation">,</span> <span class="token function">avg</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">count</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">min</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">max</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">groupby</span><span class="token punctuation">(</span>city<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">orderby</span><span class="token punctuation">(</span>city<span class="token punctuation">)</span>
</code></pre></div><h3 id="join"><a href="#join" aria-hidden="true" class="header-anchor">#</a> join</h3> <p>Вызов метода выполняет быстрый поиск записей по совпадению значений полей.</p> <p>В примере ниже производится поиск однофамильцев всех владельцев определенного автомобиля. Вызов .join() перебирает записи, имеющие значением поля name текущее значение, отобранное вызовом get(name).</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>graph
    <span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;car001&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">out</span><span class="token punctuation">(</span>owner<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">as</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span>
</code></pre></div><h3 id="ine-и-oute"><a href="#ine-и-oute" aria-hidden="true" class="header-anchor">#</a> inE и outE</h3> <p>Вызов методов приводит к перебору ссылок графа данных, а не записей. Единственный способ использования — получение названий или подсчет связей.</p> <p>Методы могут вызываться с аргументом — названием связи. В примере перебираются люди, имеющие исходящих связей «друг» больше, чем входящих.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>graph
    <span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span>type<span class="token operator">=</span><span class="token string">&quot;person&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">as</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">outE</span><span class="token punctuation">(</span><span class="token keyword">friend</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">as</span><span class="token punctuation">(</span>c1<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">gotovar</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">.</span>
    <span class="token punctuation">.</span><span class="token function">inE</span><span class="token punctuation">(</span><span class="token keyword">friend</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">as</span><span class="token punctuation">(</span>c2<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span>c1 <span class="token operator">&gt;</span> c2<span class="token punctuation">)</span>
</code></pre></div><h3 id="optional-и-endopt"><a href="#optional-и-endopt" aria-hidden="true" class="header-anchor">#</a> optional и endopt</h3> <p>Вызовы optional() и end_opt() выделяют блок с вызовами методов, производящие переходы по связям, возможные не для всех записей, отобранных перед optional().</p> <p>При отсутствии обход графа не прекращается, а продолжается методом, следующим за end_opt(). Такие блоки могут быть вложенными.</p> <p>В примере ниже отбираются и выводятся фамилии людей и номера их автомобилей в предположении, что автомобили есть не у всех.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>graph
    <span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span>type<span class="token operator">=</span><span class="token string">&quot;person&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>lastname<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">optional</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">in</span><span class="token punctuation">(</span>owner<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>number<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">endopt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span>lastname<span class="token punctuation">,</span> number<span class="token punctuation">)</span>
</code></pre></div><h3 id="start-union-next-union-и-end-union"><a href="#start-union-next-union-и-end-union" aria-hidden="true" class="header-anchor">#</a> start_union, next_union и end_union</h3> <p>Вызовы методов позволяют разбить последовательность инструкций на несколько последовательностей, результаты выполнения которых следует объединить.</p> <p>Пусть пользователя интересуют автомобили, принадлежащие определенному лицу либо имеющие определенную модель:</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>graph<span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span>type<span class="token operator">=</span><span class="token string">&quot;car&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
    <span class="token punctuation">.</span><span class="token function">start_union</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>model<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span>model<span class="token operator">=</span><span class="token string">&quot;Bugatti&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">as</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">next_union</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">outexist</span><span class="token punctuation">(</span>owner<span class="token punctuation">,</span> <span class="token string">&quot;person099&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">as</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">end_union</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span>
</code></pre></div></div> <!----> <!----> </div></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.944765d0.js" defer></script><script src="/assets/js/2.22bcbf9a.js" defer></script><script src="/assets/js/12.7338784d.js" defer></script>
  </body>
</html>
