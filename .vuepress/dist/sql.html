<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>SQL | NitrosBase</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/assets/css/0.styles.154cb869.css" as="style"><link rel="preload" href="/assets/js/app.baeb26dc.js" as="script"><link rel="preload" href="/assets/js/2.8e020b7e.js" as="script"><link rel="preload" href="/assets/js/15.05524356.js" as="script"><link rel="prefetch" href="/assets/js/10.e1943148.js"><link rel="prefetch" href="/assets/js/11.e73b5ac5.js"><link rel="prefetch" href="/assets/js/12.7bfa7f61.js"><link rel="prefetch" href="/assets/js/13.3a9eb135.js"><link rel="prefetch" href="/assets/js/14.eebeb3e5.js"><link rel="prefetch" href="/assets/js/16.e24545f3.js"><link rel="prefetch" href="/assets/js/17.19d25572.js"><link rel="prefetch" href="/assets/js/18.6991e38c.js"><link rel="prefetch" href="/assets/js/3.9e4cd4b4.js"><link rel="prefetch" href="/assets/js/4.dd0e05cf.js"><link rel="prefetch" href="/assets/js/5.8899250e.js"><link rel="prefetch" href="/assets/js/6.b6c99375.js"><link rel="prefetch" href="/assets/js/7.348434a9.js"><link rel="prefetch" href="/assets/js/8.f8ee1f78.js"><link rel="prefetch" href="/assets/js/9.5eb39887.js">
    <link rel="stylesheet" href="/assets/css/0.styles.154cb869.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">NitrosBase</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/" class="sidebar-link">NitrosBase 2.0</a></li><li><a href="/ustanovka-i-administrirovanie.html" class="sidebar-link">Установка и администрирование</a></li><li><a href="/demonstracionnaya-baza-dannykh.html" class="sidebar-link">Демонстрационная база данных</a></li><li><a href="/multimodelnost.html" class="sidebar-link">Мультимодельность</a></li><li><a href="/sql.html" class="active sidebar-link">SQL</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/sql.html#запрос-create-table" class="sidebar-link">Запрос CREATE TABLE</a></li><li class="sidebar-sub-header"><a href="/sql.html#запрос-create-table-as-edge" class="sidebar-link">Запрос CREATE TABLE AS EDGE</a></li><li class="sidebar-sub-header"><a href="/sql.html#запрос-alter-table" class="sidebar-link">Запрос ALTER TABLE</a></li><li class="sidebar-sub-header"><a href="/sql.html#запрос-create-index" class="sidebar-link">Запрос CREATE INDEX</a></li><li class="sidebar-sub-header"><a href="/sql.html#запрос-drop-table" class="sidebar-link">Запрос DROP TABLE</a></li><li class="sidebar-sub-header"><a href="/sql.html#запрос-drop-index" class="sidebar-link">Запрос DROP INDEX</a></li><li class="sidebar-sub-header"><a href="/sql.html#запрос-insert" class="sidebar-link">Запрос INSERT</a></li><li class="sidebar-sub-header"><a href="/sql.html#запрос-bulk-insert" class="sidebar-link">Запрос BULK INSERT</a></li><li class="sidebar-sub-header"><a href="/sql.html#запрос-update" class="sidebar-link">Запрос UPDATE</a></li><li class="sidebar-sub-header"><a href="/sql.html#запрос-delete" class="sidebar-link">Запрос DELETE</a></li><li class="sidebar-sub-header"><a href="/sql.html#запрос-backup" class="sidebar-link">Запрос BACKUP</a></li><li class="sidebar-sub-header"><a href="/sql.html#запрос-select" class="sidebar-link">Запрос SELECT</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/sql.html#выражение-select" class="sidebar-link">Выражение SELECT</a></li><li class="sidebar-sub-header"><a href="/sql.html#выражение-where" class="sidebar-link">Выражение WHERE</a></li><li class="sidebar-sub-header"><a href="/sql.html#выражение-from-и-join" class="sidebar-link">Выражение FROM и JOIN</a></li><li class="sidebar-sub-header"><a href="/sql.html#выражение-group-by" class="sidebar-link">Выражение GROUP BY</a></li><li class="sidebar-sub-header"><a href="/sql.html#выражение-order-by" class="sidebar-link">Выражение ORDER BY</a></li><li class="sidebar-sub-header"><a href="/sql.html#выражения-limit-и-offset" class="sidebar-link">Выражения LIMIT и OFFSET</a></li><li class="sidebar-sub-header"><a href="/sql.html#операторы" class="sidebar-link">Операторы</a></li><li class="sidebar-sub-header"><a href="/sql.html#функции" class="sidebar-link">Функции</a></li></ul></li></ul></li><li><a href="/graph-it.html" class="sidebar-link">Graph-IT</a></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>API</span> <span class="arrow right"></span></p> <!----></div></li><li><a href="/log.html" class="sidebar-link">Версии</a></li></ul> </div> <div class="page"> <div class="content default"><h1 id="sql"><a href="#sql" aria-hidden="true" class="header-anchor">#</a> SQL</h1> <p>В документе описан поддерживаемый NitrosBase диалект SQL. Во всех примерах в данном документе используется база данных, описанная в документах «<a href="/multimodelnost.html">Мультимодельность</a>» и «<a href="/demonstracionnaya-baza-dannykh.html">Демонстрационная база данных</a>»</p> <h2 id="запрос-create-table"><a href="#запрос-create-table" aria-hidden="true" class="header-anchor">#</a> <strong>Запрос CREATE TABLE</strong></h2> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token punctuation">[</span><span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span><span class="token punctuation">]</span> tbl_name 
    <span class="token punctuation">(</span> create_definition <span class="token punctuation">[</span><span class="token punctuation">,</span> create_definition<span class="token punctuation">]</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">)</span>
 
create_definition:
    col_name data_type 
      <span class="token punctuation">[</span><span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token operator">|</span> <span class="token boolean">NULL</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token keyword">DEFAULT</span> literal<span class="token punctuation">]</span>
      <span class="token punctuation">[</span><span class="token keyword">COMMENT</span> <span class="token string">'string'</span><span class="token punctuation">]</span>
    <span class="token operator">|</span> <span class="token punctuation">[</span><span class="token keyword">CONSTRAINT</span> <span class="token punctuation">[</span>symbol<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span>
      <span class="token punctuation">[</span>index_name<span class="token punctuation">]</span> <span class="token punctuation">(</span>col_name<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> tbl_name 
</code></pre></div><p><strong>Пример</strong></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> person <span class="token punctuation">(</span>
  name <span class="token keyword">varchar</span><span class="token punctuation">,</span> 
  lastname <span class="token keyword">varchar</span><span class="token punctuation">,</span> 
  age <span class="token keyword">bigint</span><span class="token punctuation">,</span> 
  city <span class="token keyword">varchar</span><span class="token punctuation">,</span> 
  income <span class="token keyword">int</span><span class="token punctuation">,</span> 
  dbl <span class="token keyword">double</span><span class="token punctuation">,</span> 
  dtime <span class="token keyword">datetime</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>CREATE TABLE автоматически создает поле id как PRIMARY KEY. Так сделано из соображений мультимодельности — отличные от реляционной модели предполагают наличие поля id у каждого узла графа или у JSON-документа. В последующих версиях будет добавлена возможность указывать CONSTRAINT PRIMARY KEY для произвольного поля</p></blockquote> <blockquote><p>FOREIGN KEY может ссылаться только на PRIMARY KEY (на поле id) и, соответственно, также может быть представлен одним полем</p></blockquote> <h2 id="запрос-create-table-as-edge"><a href="#запрос-create-table-as-edge" aria-hidden="true" class="header-anchor">#</a> Запрос CREATE TABLE AS EDGE</h2> <p>Создание специальной таблицы для представления графовых ссылок (связей типа многие-ко-многим). Может интерпретироваться как промежуточная таблица в обычной реляционной базе данных, имеющая два стандартных поля: fromid и toid.</p> <p><strong>Синтаксис</strong></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> link_name <span class="token keyword">AS</span> EDGE from_tablename to_tablename<span class="token punctuation">;</span> 
</code></pre></div><p><strong>Пример</strong></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> owner <span class="token keyword">AS</span> EDGE car person<span class="token punctuation">;</span>
</code></pre></div><p>Пример использования таблицы в SELECT запросах</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> p<span class="token punctuation">.</span>id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> lastname<span class="token punctuation">,</span> age<span class="token punctuation">,</span> c<span class="token punctuation">.</span>id<span class="token punctuation">,</span> c<span class="token punctuation">.</span>model 
<span class="token keyword">FROM</span> person p 
  <span class="token keyword">JOIN</span> owner o <span class="token keyword">ON</span> p<span class="token punctuation">.</span>id <span class="token operator">=</span> o<span class="token punctuation">.</span>toid 
  <span class="token keyword">JOIN</span> car c <span class="token keyword">ON</span> c<span class="token punctuation">.</span>id <span class="token operator">=</span> o<span class="token punctuation">.</span>fromid 
<span class="token keyword">WHERE</span> age <span class="token operator">&gt;</span> <span class="token number">20</span> <span class="token operator">AND</span> model <span class="token operator">=</span> <span class="token string">'Toyota'</span> 
</code></pre></div><p>То же самое может быть сделано более простым запросом (см. описание выражения JOIN):</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> p<span class="token punctuation">.</span>id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> lastname<span class="token punctuation">,</span> age<span class="token punctuation">,</span> c<span class="token punctuation">.</span>id<span class="token punctuation">,</span> c<span class="token punctuation">.</span>model 
<span class="token keyword">FROM</span> person p 
  <span class="token keyword">JOIN</span> car c <span class="token keyword">ON</span> p<span class="token punctuation">.</span>id <span class="token operator">=</span> c<span class="token punctuation">.</span>owner 
<span class="token keyword">WHERE</span> age <span class="token operator">&gt;</span> <span class="token number">20</span> <span class="token operator">AND</span> model <span class="token operator">=</span> <span class="token string">'Toyota'</span>
</code></pre></div><h2 id="запрос-alter-table"><a href="#запрос-alter-table" aria-hidden="true" class="header-anchor">#</a> Запрос ALTER TABLE</h2> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> tbl_name
    <span class="token punctuation">[</span>alter_specification <span class="token punctuation">[</span><span class="token punctuation">,</span> alter_specification<span class="token punctuation">]</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>

alter_specification:
  table_options
  <span class="token operator">|</span> <span class="token keyword">ADD</span> <span class="token punctuation">[</span><span class="token keyword">COLUMN</span><span class="token punctuation">]</span> col_name column_definition<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token operator">|</span> <span class="token keyword">ADD</span> <span class="token punctuation">[</span><span class="token keyword">COLUMN</span><span class="token punctuation">]</span> <span class="token punctuation">(</span>col_name column_definition<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
  <span class="token operator">|</span> <span class="token keyword">ADD</span> <span class="token punctuation">[</span><span class="token keyword">CONSTRAINT</span> <span class="token punctuation">[</span>symbol<span class="token punctuation">]</span><span class="token punctuation">]</span>
        <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">[</span>index_name<span class="token punctuation">]</span> <span class="token punctuation">(</span>col_name<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> tbl_name
  <span class="token operator">|</span> {<span class="token keyword">ALTER</span><span class="token operator">|</span><span class="token keyword">MODIFY</span>} <span class="token punctuation">[</span><span class="token keyword">COLUMN</span><span class="token punctuation">]</span> col_name column_definition<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token operator">|</span> <span class="token keyword">DROP</span> <span class="token punctuation">[</span><span class="token keyword">COLUMN</span><span class="token punctuation">]</span> col_name


column_definition:
    data_type <span class="token punctuation">[</span><span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token operator">|</span> <span class="token boolean">NULL</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token keyword">DEFAULT</span> literal<span class="token punctuation">]</span>
</code></pre></div><p><strong>Пример</strong></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> person <span class="token keyword">ADD</span> birthday <span class="token keyword">DATE</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="запрос-create-index"><a href="#запрос-create-index" aria-hidden="true" class="header-anchor">#</a> Запрос <strong>CREATE INDEX</strong></h2> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token punctuation">[</span><span class="token keyword">UNIQUE</span><span class="token punctuation">]</span> <span class="token keyword">INDEX</span> index_name <span class="token keyword">ON</span> tbl_name <span class="token punctuation">(</span>col_name<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>Пример</strong></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">INDEX</span> p_ndx_age <span class="token keyword">ON</span> person <span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="запрос-drop-table"><a href="#запрос-drop-table" aria-hidden="true" class="header-anchor">#</a> Запрос <strong>DROP TABLE</strong></h2> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> <span class="token punctuation">[</span><span class="token keyword">IF</span> <span class="token keyword">EXISTS</span><span class="token punctuation">]</span>
    tbl_name
</code></pre></div><p><strong>Пример</strong></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> person<span class="token punctuation">;</span>
</code></pre></div><h2 id="запрос-drop-index"><a href="#запрос-drop-index" aria-hidden="true" class="header-anchor">#</a> Запрос <strong>DROP INDEX</strong></h2> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">DROP</span> <span class="token keyword">INDEX</span> index_name <span class="token punctuation">[</span><span class="token keyword">ON</span> tbl_name<span class="token punctuation">]</span>
</code></pre></div><p><strong>Пример</strong></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">DROP</span> <span class="token keyword">INDEX</span> p_ndx_age<span class="token punctuation">;</span>
</code></pre></div><h2 id="запрос-insert"><a href="#запрос-insert" aria-hidden="true" class="header-anchor">#</a> Запрос <strong>INSERT</strong></h2> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">INSERT</span> <span class="token punctuation">[</span><span class="token keyword">INTO</span><span class="token punctuation">]</span> tbl_name
    <span class="token punctuation">[</span><span class="token punctuation">(</span>col_name<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
     <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token keyword">value</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>Пример</strong></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> person
     <span class="token punctuation">(</span>id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> lastname<span class="token punctuation">,</span> age<span class="token punctuation">,</span> city<span class="token punctuation">,</span> dbl<span class="token punctuation">,</span> dtime<span class="token punctuation">)</span>
     <span class="token keyword">VALUES</span>
     <span class="token punctuation">(</span><span class="token string">'person5000'</span><span class="token punctuation">,</span> <span class="token string">'John'</span><span class="token punctuation">,</span> <span class="token string">'Tester'</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> 
     <span class="token string">'Lissabon'</span><span class="token punctuation">,</span> <span class="token number">1.11</span><span class="token punctuation">,</span> <span class="token string">'2018-07-03 01:52:02.65'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="запрос-bulk-insert"><a href="#запрос-bulk-insert" aria-hidden="true" class="header-anchor">#</a> Запрос <strong>BULK INSERT</strong></h2> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">BULK</span> <span class="token keyword">INSERT</span> table_name <span class="token punctuation">(</span>col_name<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> 
<span class="token keyword">FROM</span> <span class="token string">'file_path'</span> 
<span class="token punctuation">[</span><span class="token keyword">WITH</span> <span class="token punctuation">(</span><span class="token punctuation">[</span>FIRSTROW <span class="token operator">=</span> number<span class="token punctuation">,</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>FIELDTERMINATOR <span class="token operator">=</span> <span class="token string">'character'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
</code></pre></div><p><strong>Пример</strong></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">BULK</span> <span class="token keyword">INSERT</span> person <span class="token punctuation">(</span>id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> lastname<span class="token punctuation">,</span> age<span class="token punctuation">,</span> city<span class="token punctuation">,</span> income<span class="token punctuation">,</span> dbl<span class="token punctuation">,</span> dtime<span class="token punctuation">)</span> 
<span class="token keyword">FROM</span> <span class="token string">'sntest1/person.csv'</span> 
<span class="token keyword">WITH</span> <span class="token punctuation">(</span>FIRSTROW <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span> FIELDTERMINATOR <span class="token operator">=</span> <span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>Замечания</strong></p> <p>Параметр FIRSTROW указывает с какой строки файлов начинать импорт (нумерация строк начинаются с 1). Например, для того чтобы пропустить заголовок (пропустить одну первую строку), нужно указать FIRSTROW = 2.</p> <p>Путь к файлу должен быть абсолютным, возможно также указывать путь относительно файла запущенного сервера. Например, если сервер nbserver.exe лежит в каталоге c:/nitrosbase/bin, то относительный путь ../data/csv/person.csv будет раскрыт как c:/nitrosbase/data/csv/person.csv.</p> <h2 id="запрос-update"><a href="#запрос-update" aria-hidden="true" class="header-anchor">#</a> Запрос <strong>UPDATE</strong></h2> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">UPDATE</span> table_reference
    <span class="token keyword">SET</span> col_name <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token punctuation">[</span><span class="token keyword">WHERE</span> where_condition<span class="token punctuation">]</span>

<span class="token keyword">UPDATE</span> table_name_or_alias
    <span class="token keyword">SET</span> col_name <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token keyword">FROM</span> tablename <span class="token punctuation">[</span>alias<span class="token punctuation">]</span> <span class="token operator">|</span> join_expression
    <span class="token punctuation">[</span><span class="token keyword">WHERE</span> where_condition<span class="token punctuation">]</span>
</code></pre></div><p><strong>Пример</strong></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">UPDATE</span> person <span class="token keyword">SET</span> name <span class="token operator">=</span> <span class="token string">'LAMAR'</span> <span class="token keyword">WHERE</span> name <span class="token operator">=</span> <span class="token string">'Lamar'</span>
</code></pre></div><p><strong>Замечания</strong></p> <p>Синтаксис выражений FROM и WHERE тот же, что и в запросе SELECT.</p> <h2 id="запрос-delete"><a href="#запрос-delete" aria-hidden="true" class="header-anchor">#</a> Запрос <strong>DELETE</strong></h2> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> tbl_name
    <span class="token punctuation">[</span><span class="token keyword">WHERE</span> where_condition<span class="token punctuation">]</span>
 
<span class="token keyword">DELETE</span> table_name_or_alias <span class="token keyword">FROM</span> join_expression
    <span class="token punctuation">[</span><span class="token keyword">WHERE</span> where_condition<span class="token punctuation">]</span>
</code></pre></div><p><strong>Пример</strong></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> person <span class="token keyword">WHERE</span> name <span class="token operator">=</span> <span class="token string">'Livia'</span>
</code></pre></div><p><strong>Замечания</strong></p> <p>Синтаксис выражений FROM и WHERE тот же, что и в запросе SELECT.</p> <h2 id="запрос-backup"><a href="#запрос-backup" aria-hidden="true" class="header-anchor">#</a> Запрос BACKUP</h2> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">BACKUP</span> <span class="token keyword">DATABASE</span> <span class="token keyword">TO</span> path
</code></pre></div><p><strong>Пример</strong></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">BACKUP</span> <span class="token keyword">DATABASE</span> <span class="token keyword">TO</span> <span class="token string">'c:/data/sntest1/backup'</span>
</code></pre></div><h2 id="запрос-select"><a href="#запрос-select" aria-hidden="true" class="header-anchor">#</a> Запрос SELECT</h2> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
    <span class="token punctuation">[</span> <span class="token keyword">DISTINCT</span> <span class="token punctuation">]</span>
    select_expression <span class="token punctuation">[</span><span class="token punctuation">,</span> select_expression <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
    <span class="token keyword">FROM</span> tablename <span class="token operator">|</span> join_expression
    <span class="token punctuation">[</span><span class="token keyword">WHERE</span> where_condition<span class="token punctuation">]</span>
    <span class="token punctuation">[</span><span class="token keyword">GROUP</span> <span class="token keyword">BY</span> col_name <span class="token punctuation">[</span><span class="token punctuation">,</span> col_name <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
    <span class="token comment">-- [HAVING where_condition]</span>
    <span class="token punctuation">[</span><span class="token keyword">ORDER</span> <span class="token keyword">BY</span> col_name <span class="token punctuation">[</span><span class="token keyword">ASC</span> <span class="token operator">|</span> <span class="token keyword">DESC</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> col_name …<span class="token punctuation">]</span> <span class="token punctuation">]</span>
    <span class="token punctuation">[</span><span class="token keyword">LIMIT</span> row_count<span class="token punctuation">]</span> 
    <span class="token punctuation">[</span><span class="token keyword">OFFSET</span> <span class="token keyword">offset</span><span class="token punctuation">]</span>
    <span class="token punctuation">[</span><span class="token keyword">INDEX</span> <span class="token keyword">WHERE</span> where_condition<span class="token punctuation">]</span>
</code></pre></div><p><strong>Пример</strong></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">DROP</span> <span class="token keyword">INDEX</span> p_ndx_age<span class="token punctuation">;</span>
</code></pre></div><h3 id="выражение-select"><a href="#выражение-select" aria-hidden="true" class="header-anchor">#</a> Выражение SELECT</h3> <ul><li><p>Простой список полей</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> name<span class="token punctuation">,</span> lastname <span class="token keyword">from</span> person
</code></pre></div></li> <li><p>Все поля</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> person
<span class="token keyword">select</span> p<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span> c<span class="token punctuation">.</span>model <span class="token keyword">from</span> person p <span class="token keyword">join</span> car c <span class="token keyword">on</span> p<span class="token punctuation">.</span>id <span class="token operator">=</span> c<span class="token punctuation">.</span>owner
</code></pre></div></li> <li><p>AS</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">as</span> countofpersons <span class="token keyword">from</span> person
</code></pre></div></li> <li><p>Простые выражения и функции</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> upper<span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token keyword">as</span> uname<span class="token punctuation">,</span> age<span class="token operator">*</span><span class="token number">2</span> <span class="token keyword">as</span> dbl <span class="token keyword">from</span> person
</code></pre></div></li> <li><p>Агрегирующие функции</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">min</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">max</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">avg</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span> <span class="token keyword">from</span> person
</code></pre></div></li> <li><p>DISTINCT</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token keyword">distinct</span> name<span class="token punctuation">,</span> lastname <span class="token keyword">from</span> person
</code></pre></div></li></ul> <h3 id="выражение-where"><a href="#выражение-where" aria-hidden="true" class="header-anchor">#</a> Выражение WHERE</h3> <ul><li><p>Простые операторы сравнения и логические операторы</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> person <span class="token keyword">where</span> age <span class="token operator">&gt;</span> <span class="token number">20</span> <span class="token operator">and</span> name <span class="token operator">=</span> <span class="token string">'Lamar'</span>
</code></pre></div></li> <li><p>Простые выражения и функции (список операторов и функций см ниже)</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> person <span class="token keyword">where</span> age<span class="token operator">*</span><span class="token number">2</span> <span class="token operator">-</span> income<span class="token operator">/</span><span class="token number">20</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">and</span> upper<span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token string">'LAMAR'</span>
</code></pre></div></li> <li><p>Оператор IN</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> name<span class="token punctuation">,</span> age <span class="token keyword">from</span> person 
<span class="token keyword">where</span> age <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">,</span> <span class="token number">24</span><span class="token punctuation">)</span> <span class="token operator">and</span> name <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token string">'Lamar'</span><span class="token punctuation">,</span> <span class="token string">'Susan'</span><span class="token punctuation">)</span>
</code></pre></div></li> <li><p>Проверка на NULL</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> person <span class="token keyword">WHERE</span> age <span class="token operator">IS</span> <span class="token boolean">NULL</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> person <span class="token keyword">WHERE</span> age <span class="token operator">IS</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span>
</code></pre></div></li></ul> <p>См. также разделы операторы и функции</p> <h3 id="выражение-from-и-join"><a href="#выражение-from-и-join" aria-hidden="true" class="header-anchor">#</a> Выражение <strong>FROM и JOIN</strong></h3> <ul><li><p>Запрос к одной таблице</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> person 
</code></pre></div></li> <li><p>JOIN между двумя таблицами через поле с FOREIGN KEY</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> name<span class="token punctuation">,</span> model <span class="token keyword">from</span> person p <span class="token keyword">join</span> car c <span class="token keyword">on</span> p<span class="token punctuation">.</span>id <span class="token operator">=</span> c<span class="token punctuation">.</span>owner
</code></pre></div></li> <li><p>JOIN между несколькими таблицами</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> p<span class="token punctuation">.</span>id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> lastname<span class="token punctuation">,</span> age<span class="token punctuation">,</span> c<span class="token punctuation">.</span>id<span class="token punctuation">,</span> c<span class="token punctuation">.</span>model
<span class="token keyword">FROM</span> person p 
  <span class="token keyword">JOIN</span> owner o <span class="token keyword">ON</span> p<span class="token punctuation">.</span>id <span class="token operator">=</span> o<span class="token punctuation">.</span>toid 
  <span class="token keyword">JOIN</span> car c <span class="token keyword">ON</span> c<span class="token punctuation">.</span>id <span class="token operator">=</span> o<span class="token punctuation">.</span>fromid
<span class="token keyword">WHERE</span> age <span class="token operator">&gt;</span> <span class="token number">20</span> <span class="token operator">AND</span> model <span class="token operator">=</span> <span class="token string">'Toyota'</span>
</code></pre></div></li> <li><p>JOIN между двумя таблицами через промежуточную таблицу (в данном примере через таблицу owner, имеющую тип EDGE, описывающий ребра графа)</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> p<span class="token punctuation">.</span>id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> lastname<span class="token punctuation">,</span> age<span class="token punctuation">,</span> c<span class="token punctuation">.</span>id<span class="token punctuation">,</span> c<span class="token punctuation">.</span>model
<span class="token keyword">FROM</span> person p 
  <span class="token keyword">JOIN</span> owner o <span class="token keyword">ON</span> p<span class="token punctuation">.</span>id <span class="token operator">=</span> o<span class="token punctuation">.</span>toid 
  <span class="token keyword">JOIN</span> car c <span class="token keyword">ON</span> c<span class="token punctuation">.</span>id <span class="token operator">=</span> o<span class="token punctuation">.</span>fromid
<span class="token keyword">WHERE</span> age <span class="token operator">&gt;</span> <span class="token number">20</span> <span class="token operator">AND</span> model <span class="token operator">=</span> <span class="token string">'Toyota'</span>
</code></pre></div><p>NitrosBase позволяет упростить подобный запрос и рассматривать такую таблицу как простое поле c FOREIGN KEY, имеющее множество значений:</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> p<span class="token punctuation">.</span>id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> lastname<span class="token punctuation">,</span> age<span class="token punctuation">,</span> c<span class="token punctuation">.</span>id<span class="token punctuation">,</span> c<span class="token punctuation">.</span>model
<span class="token keyword">FROM</span> person p 
  <span class="token keyword">JOIN</span> car c <span class="token keyword">ON</span> p<span class="token punctuation">.</span>id <span class="token operator">=</span> c<span class="token punctuation">.</span>owner
<span class="token keyword">WHERE</span> age <span class="token operator">&gt;</span> <span class="token number">20</span> <span class="token operator">AND</span> model <span class="token operator">=</span> <span class="token string">'Toyota'</span>
</code></pre></div></li></ul> <p><strong>Особенности реализации</strong></p> <p>NitrosBase существенно ускоряет обработку JOIN, так как является мультимодельной и для хранения связей использует возможности графовой подсистемы.</p> <p>В реляционном представлении связи между объектам представляются как ссылки через поля с FOREIGN KEY на id записей в этой же или другой таблице. Условие ON может содержать только оператор =.</p> <h3 id="выражение-group-by"><a href="#выражение-group-by" aria-hidden="true" class="header-anchor">#</a> Выражение <strong>GROUP BY</strong></h3> <ul><li><p>Простая группировка по одному полю</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span>dbl<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">avg</span><span class="token punctuation">(</span>dbl<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">min</span><span class="token punctuation">(</span>dbl<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">max</span><span class="token punctuation">(</span>dbl<span class="token punctuation">)</span> 
<span class="token keyword">from</span> person 
<span class="token keyword">group</span> <span class="token keyword">by</span> city
</code></pre></div></li> <li><p>Группировка по нескольким полям</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span>dbl<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">avg</span><span class="token punctuation">(</span>dbl<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">min</span><span class="token punctuation">(</span>dbl<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">max</span><span class="token punctuation">(</span>dbl<span class="token punctuation">)</span> 
<span class="token keyword">from</span> person 
<span class="token keyword">group</span> <span class="token keyword">by</span> city<span class="token punctuation">,</span> name
</code></pre></div></li></ul> <h3 id="выражение-order-by"><a href="#выражение-order-by" aria-hidden="true" class="header-anchor">#</a> Выражение ORDER BY</h3> <ul><li><p>Простая сортировка по одному полю</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> name<span class="token punctuation">,</span> lastname<span class="token punctuation">,</span> age
<span class="token keyword">from</span> person 
<span class="token keyword">order</span> <span class="token keyword">by</span> name
</code></pre></div></li> <li><p>Сортировка по нескольким полям и с указанием порядка сортировки</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> name<span class="token punctuation">,</span> lastname<span class="token punctuation">,</span> age
<span class="token keyword">from</span> person
<span class="token keyword">order</span> <span class="token keyword">by</span> name<span class="token punctuation">,</span> lastname <span class="token keyword">asc</span><span class="token punctuation">,</span> age <span class="token keyword">desc</span>
</code></pre></div></li></ul> <h3 id="выражения-limit-и-offset"><a href="#выражения-limit-и-offset" aria-hidden="true" class="header-anchor">#</a> Выражения LIMIT и OFFSET</h3> <p>LIMIT и OFFSET служат для ограничения количества записей в результате.</p> <ul><li><p>Вывести только 100 записей:</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> person <span class="token keyword">limit</span> <span class="token number">100</span>
</code></pre></div></li> <li><p>Вывести 10 записей, начиная с 100-й (нумерация записей начинается с нуля — то есть в данном случае нужно пропустить первые 100 записей):</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> person <span class="token keyword">limit</span> <span class="token number">10</span> <span class="token keyword">offset</span> <span class="token number">100</span>
</code></pre></div></li></ul> <h3 id="операторы"><a href="#операторы" aria-hidden="true" class="header-anchor">#</a> Операторы</h3> <ul><li><p>операторы сравнения:</p> <p><strong>&gt;, &gt;=, &lt;, &lt;=, =, &lt;&gt;, !=, IS NULL, IS NOT NULL, IN</strong></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> person <span class="token keyword">where</span> age <span class="token operator">is</span> <span class="token boolean">null</span>
</code></pre></div></li> <li><p>логические операторы:</p> <p><strong>and (&amp;&amp;), or (||), not</strong></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> person
<span class="token keyword">where</span> age <span class="token operator">&gt;</span> <span class="token number">50</span> <span class="token operator">and</span> <span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">'Lamar'</span> <span class="token operator">or</span> lastname <span class="token operator">=</span> <span class="token string">'Wurdeman'</span><span class="token punctuation">)</span>
</code></pre></div></li> <li><p>арифметические операторы:</p> <p><strong>+, -, *, /</strong></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> age<span class="token operator">*</span><span class="token number">2</span> <span class="token keyword">from</span> person <span class="token keyword">where</span> age<span class="token operator">*</span><span class="token number">100</span><span class="token operator">/</span>income <span class="token operator">&gt;</span> <span class="token number">3</span>
</code></pre></div></li></ul> <h3 id="функции"><a href="#функции" aria-hidden="true" class="header-anchor">#</a> Функции</h3> <table><thead><tr><th style="text-align:left;">Функция</th> <th style="text-align:left;">Описание</th></tr></thead> <tbody><tr><td style="text-align:left;"><strong>ASCII</strong></td> <td style="text-align:left;">Returns the ASCII value for the specific character</td></tr> <tr><td style="text-align:left;"><strong>CONCAT</strong></td> <td style="text-align:left;">Adds two or more expressions together</td></tr> <tr><td style="text-align:left;"><strong>LENGTH</strong></td> <td style="text-align:left;">Returns the length of a string (in bytes)</td></tr> <tr><td style="text-align:left;"><strong>LOWER</strong></td> <td style="text-align:left;">Converts a string to lower-case</td></tr> <tr><td style="text-align:left;"><strong>LPAD</strong></td> <td style="text-align:left;">Left-pads a string with another string, to a certain length</td></tr> <tr><td style="text-align:left;"><strong>POSITION</strong></td> <td style="text-align:left;">Returns the position of the first occurrence of a substring in a string</td></tr> <tr><td style="text-align:left;"><strong>REPEAT</strong></td> <td style="text-align:left;">Repeats a string as many times as specified</td></tr> <tr><td style="text-align:left;"><strong>REPLACE</strong></td> <td style="text-align:left;">Replaces all occurrences of a substring within a string</td></tr> <tr><td style="text-align:left;"><strong>REVERSE</strong></td> <td style="text-align:left;">Reverses a string and returns the result</td></tr> <tr><td style="text-align:left;"><strong>STRLEFT</strong></td> <td style="text-align:left;">Extracts a number of characters from a string (starting from left)</td></tr> <tr><td style="text-align:left;"><strong>STRRIGHT</strong></td> <td style="text-align:left;">Extracts a number of characters from a string (starting from right)</td></tr> <tr><td style="text-align:left;"><strong>RPAD</strong></td> <td style="text-align:left;">Right-pads a string with another string, to a certain length</td></tr> <tr><td style="text-align:left;"><strong>REGEX</strong></td> <td style="text-align:left;">Match regex pattern</td></tr> <tr><td style="text-align:left;"><strong>SUBSTR</strong></td> <td style="text-align:left;">Extracts a substring from a string (starting at any position)</td></tr> <tr><td style="text-align:left;"><strong>TRIM</strong></td> <td style="text-align:left;">Removes leading and trailing spaces from a string</td></tr> <tr><td style="text-align:left;"><strong>UPPER</strong></td> <td style="text-align:left;">Converts a string to upper-case</td></tr></tbody></table></div> <!----> <!----> </div></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.baeb26dc.js" defer></script><script src="/assets/js/2.8e020b7e.js" defer></script><script src="/assets/js/15.05524356.js" defer></script>
  </body>
</html>
